# AI Query Optimizer

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ –≤ RAG-—Å–∏—Å—Ç–µ–º–∞—Ö. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Cloudflare AI (Llama 3.3) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

–ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –≤ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–ª—è –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞:

```
–í—Ö–æ–¥: "Key risks in climate reports?"

–í—ã—Ö–æ–¥:
1. "What are the main climate-related hazards identified in reports?"
2. "Critical vulnerabilities documented in climate change assessments"
3. "Primary threats to ecosystems from global warming scenarios"

–†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–∞—Ö–æ–¥–∏—Ç –Ω–∞ 60% –±–æ–ª—å—à–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install -r requirements.txt
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π Cloudflare

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [dash.cloudflare.com](https://dash.cloudflare.com/)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Account ID** (—Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É –Ω–∞ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ)
3. –°–æ–∑–¥–∞–π—Ç–µ **API Token**: Profile ‚Üí API Tokens ‚Üí Create Token
   - –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω "Edit Cloudflare Workers"
   - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ Custom Token —Å –ø—Ä–∞–≤–æ–º `Account.Workers AI Read`

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
```

### 4. –ó–∞–ø—É—Å–∫

```bash
python main.py "Key risks in climate reports?"
```

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
======================================================================
AI QUERY OPTIMIZER
======================================================================

üìù –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å: 'Key risks in climate reports?'

[–®–∞–≥ 1/4] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Cloudflare AI (Llama 3.3)...
   ‚úì –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ 3 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

[–®–∞–≥ 2/4] –†–∞—Å—á–µ—Ç similarity scores –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏...
   ‚úì –†–∞—Å—Å—á–∏—Ç–∞–Ω—ã –∫–æ—Å–∏–Ω—É—Å–Ω—ã–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏

[–®–∞–≥ 3/4] Baseline retrieval (1 –∑–∞–ø—Ä–æ—Å)...
   ‚úì –ù–∞–π–¥–µ–Ω–æ 5 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

[–®–∞–≥ 4/4] Optimized retrieval (4 –∑–∞–ø—Ä–æ—Å–∞)...
   ‚úì –ù–∞–π–¥–µ–Ω–æ 8 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

======================================================================
–†–ï–ó–£–õ–¨–¢–ê–¢–´
======================================================================

üîÑ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

  1. [Similarity: 0.872]
     What are the main climate-related hazards identified in reports?

  2. [Similarity: 0.834]
     Critical vulnerabilities documented in climate change assessments

  3. [Similarity: 0.809]
     Primary threats to ecosystems from global warming scenarios

----------------------------------------------------------------------
üìä Retrieval —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   Baseline (1 query):     5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   Optimized (4 queries):  8 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   Recall improvement:     +60.0%

----------------------------------------------------------------------
‚úÖ –¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞: recall —É–ª—É—á—à–µ–Ω–∏–µ ‚â•20%
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
User Query 
    ‚Üì
[Cloudflare AI - Llama 3.3]  ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 3 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    ‚Üì
[Sentence Transformers]       ‚Üí –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (384 dim)
    ‚Üì
[FAISS Search]                ‚Üí –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
    ‚Üì
–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤       ‚Üí –£–ª—É—á—à–µ–Ω–Ω—ã–π recall
```

## –¢–µ—Å—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä–ø—É—Å –∏–∑ **IPCC AR6 Report** (10 –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤):
- –í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∏–º–∞—Ç–∞
- –†–∏—Å–∫–∏ –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤ –∏ –Ω–∞—Å–µ–ª–µ–Ω–∏—è
- –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –ø–æ–≥–æ–¥–Ω—ã–µ —è–≤–ª–µ–Ω–∏—è
- –ü—Ä–æ–¥–æ–≤–æ–ª—å—Å—Ç–≤–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–π –∫–æ—Ä–ø—É—Å, –∏–∑–º–µ–Ω–∏–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `IPCC_DOCS` –≤ –∫–æ–¥–µ.
